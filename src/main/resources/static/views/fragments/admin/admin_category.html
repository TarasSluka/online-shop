<div><!--ng-include="{{serverPath+'/views/fragments/category_breadcrumb.html'}}"-->
    <div ng-if="hierarchy.length>1">
        <ol class="breadcrumb">
            <li>
                <a ui-sref="shop.root.home.category">
                    <i class="fa fa-home"></i>
                </a>
            </li>
            <li ng-repeat="hier in hierarchy" ng-class='{myBreadcrumb : $last}'>
                <a href="{{serverPath}}#/admin/category/{{hier.id}}">
                    {{hier.name}}
                </a>
            </li>
        </ol>
    </div>
    <div class="container">
        <div class="row">
            <button type="button" ng-click="toggleShowAdd()" class="btn  btn-primary">
                <i class="glyphicon glyphicon-plus">
                </i>
            </button>
            <button ng-if="!isRootCategory(categories)" type="button" ng-click="toggleShowEdit()"
                    class="btn  btn-primary">
                <i class="glyphicon glyphicon-edit">
                </i>
            </button>
        </div>
    </div>
    <div class="row-fluid span12" ng-show="showAdd">
        <input ng-model="newCategory.name" placeholder="name category" type="text"/>
        <input ng-model="newCategory.value" placeholder="description category" type="text"/>
        <button ng-click="addCategory(newCategory, categories.id)" class="btn btn-success" type="button">add</button>
        <button type="button" ng-click="toggleShowAdd()" class="btn btn-danger">
            <i class="glyphicon glyphicon-remove-circle">
            </i>
        </button>
    </div>
    <div class="row-fluid span12" ng-show="showEdit">
        <input ng-model="editCategoryName" placeholder="name category" type="text"/>
        <input ng-model="editCategoryDescription" placeholder="description category" type="text"/>
        <button class="btn btn-success" type="button">save</button>
        <button type="button" ng-click="toggleShowEdit()" class="btn btn-danger">
            <i class="glyphicon glyphicon-remove-circle">
            </i>
        </button>
    </div>
    <div class="row-fluid span12" ng-show="showMassage">
        {{massage}}
    </div>
    <table class="table table-condensed table-hover table-striped">
        <thead>
        <tr>
            <th colspan="2">
                <input class="form-control" ng-model="searchText" placeholder="search ...">
            </th>
            <th></th>
            <th class="pull-right">
                <button ng-click="addProduct()" type="button" class="btn  btn-primary">add product</button>
            </th>
        </tr>
        <tr>
            <td>id</td>
            <td>name</td>
            <td>description</td>
            <td></td>
            <td></td>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="category in categories.children | filter:searchText">
            <td class="cursorPointer" ui-sref="shop.root.admin.category({categoryId: category.id})">{{category.id}}</td>
            <td class="cursorPointer" ui-sref="shop.root.admin.category({categoryId: category.id})">{{category.name}}
            </td>
            <td class="cursorPointer" ui-sref="shop.root.admin.category({categoryId: category.id})">
                {{category.description}}
            </td>
            <td>
                <button ng-click="deleteCategory(category)" type="button" class="btn btn-danger">
                    <i class="glyphicon glyphicon-remove-circle">
                    </i>
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>